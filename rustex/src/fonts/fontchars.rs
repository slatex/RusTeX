use std::collections::hash_map::Entry;
use std::collections::HashMap;
use std::sync::{Arc, RwLock};
use crate::utils::TeXStr;

pub enum FontTableParam {
    Text,Math,SansSerif,Italic,Bold,Script,Capital,Monospaced,Blackboard,Fraktur,CapitalLetters
}

pub struct FontTable {
    pub params:Vec<FontTableParam>,
    table:&'static HashMap<u8,&'static str>
}
impl FontTable {
    pub fn as_unicode(&self,u:u8) -> &str {
        todo!()
    }
    pub fn get_char(&self,u:u8) -> &str {
        match self.table.get(&u) {
            Some(c) => c,
            None => "???"
        }
    }
}

pub struct FontTableStore {
    map : RwLock<HashMap<TeXStr,Arc<FontTable>>>
}
impl FontTableStore {
    pub fn get(&self, name:TeXStr) -> Option<Arc<FontTable>> {
        match self.map.write().unwrap().entry(name.clone()) {
            Entry::Occupied(o) => Some(o.get().clone()),
            Entry::Vacant(o) => match &name.to_string() {
                s if s == "cmr" => Some(o.insert(Arc::new(FontTable {
                    params:vec!(FontTableParam::Text),
                    table:&STANDARD_TEXT_CM
                })).clone()),
                _ => None
            }
        }
    }
    pub(in crate::fonts::fontchars) fn new() -> FontTableStore { FontTableStore {map:RwLock::new(HashMap::new())}}
}

lazy_static! {
    pub static ref FONT_TABLES : FontTableStore = FontTableStore::new();
    pub static ref STANDARD_TEXT_CM : HashMap<u8,&'static str> = HashMap::from([
        (0,"Î“"),(1,"âˆ†"),(2,"Î˜"),(3,"Î›"),(4,"Î"),(5,"Î "),(6,"Î£"),(7,"Î¥"),(8,"Î¦"),(9,"Î¨"),(10,"Î©"),
        (11,"ff"),(12,"fi"),(13,"fl"),(14,"ffi"),(15,"ffl"),(16,"Ä±"),(17,"È·"),(18,"`"),(19," Ì"),
        (20,"Ë‡"),(21," Ì†"),(22," Ì„"),(23," ÌŠ"),(24," Ì§"),(25,"ÃŸ"),(26,"Ã¦"),(27,"Å“"),(28,"Ã¸"),(29,"Ã†"),
        (30,"Å’"),(31,"Ã˜"),(32," "),(33,"!"),(34,"â€"),(35,"#"),(36,"$"),(37,"%"),(38,"&"),(39,"â€™"),
        (40,"("),(41,")"),(42,"*"),(43,"+"),(44,","),(45,"-"),(46,"."),(47,"/"),(48,"0"),(49,"1"),
        (50,"2"),(51,"3"),(52,"4"),(53,"5"),(54,"6"),(55,"7"),(56,"8"),(57,"9"),(58,":"),(59,";"),
        (60,"Â¡"),(61,"="),(62,"Â¿"),(63,"?"),(64,"@"),(65,"A"),(66,"B"),(67,"C"),(68,"D"),(69,"E"),
        (70,"F"),(71,"G"),(72,"H"),(73,"I"),(74,"J"),(75,"K"),(76,"L"),(77,"M"),(78,"N"),(79,"O"),
        (80,"P"),(81,"Q"),(82,"R"),(83,"S"),(84,"T"),(85,"U"),(86,"V"),(87,"W"),(88,"X"),(89,"Y"),
        (90,"Z"),(91,"["),(92,"â€œ"),(93,"]"),(94,"^"),(95," Ì‡"),(96,"â€˜"),(97,"a"),(98,"b"),(99,"c"),
        (100,"d"),(101,"e"),(102,"f"),(103,"g"),(104,"h"),(105,"i"),(106,"j"),(107,"k"),(108,"l"),
        (109,"m"),(110,"n"),(111,"o"),(112,"p"),(113,"q"),(114,"r"),(115,"s"),(116,"t"),(117,"u"),
        (118,"v"),(119,"w"),(120,"x"),(121,"y"),(122,"z"),(123,"â€“"),(124,"â€”"),(125," Ì‹"),(126," Ìƒ"),
        (127," Ìˆ")
    ]);
    pub static ref STANDARD_TEXT_EC : HashMap<u8,&'static str> = HashMap::from([
        (0,"`"),(1," Ì"),(2,"^"),(3," Ìƒ"),(4," Ìˆ"),(5," Ì‹"),(6," ÌŠ"),(7,"Ë‡"),(8," Ì†"),(9," Ì„"),(10," Ì‡"),
        (11," Ì§"),(12," Ì¨"),(13,","),(14,"â€¹"),(15,"â€º"),(16,"â€œ"),(17,"â€"),(18,"â€"),(19,"Â«"),(20,"Â»"),
        (21,"-"),(22,"â€•"),(23,""),(24,"ã€‚"),(25,"Ä±"),(26,"È·"),(27,"ff"),(28,"fi"),(29,"fl"),(30,"ffi"),
        (31,"ffl"),(32,"â£"),(33,"!"),(34,"\""),(35,"#"),(36,"$"),(37,"%"),(38,"&"),(39,"â€™"),(40,"("),
        (41,")"),(42,"*"),(43,"+"),(44,","),(45,"-"),(46,"."),(47,"/"),(48,"0"),(49,"1"),
        (50,"2"),(51,"3"),(52,"4"),(53,"5"),(54,"6"),(55,"7"),(56,"8"),(57,"9"),(58,":"),(59,";"),
        (60,"Â¡"),(61,"="),(62,"Â¿"),(63,"?"),(64,"@"),(65,"A"),(66,"B"),(67,"C"),(68,"D"),(69,"E"),
        (70,"F"),(71,"G"),(72,"H"),(73,"I"),(74,"J"),(75,"K"),(76,"L"),(77,"M"),(78,"N"),(79,"O"),
        (80,"P"),(81,"Q"),(82,"R"),(83,"S"),(84,"T"),(85,"U"),(86,"V"),(87,"W"),(88,"X"),(89,"Y"),
        (90,"Z"),(91,"["),(92,"â€œ"),(93,"]"),(94,"^"),(95," Ì‡"),(96,"â€˜"),(97,"a"),(98,"b"),(99,"c"),
        (100,"d"),(101,"e"),(102,"f"),(103,"g"),(104,"h"),(105,"i"),(106,"j"),(107,"k"),(108,"l"),
        (109,"m"),(110,"n"),(111,"o"),(112,"p"),(113,"q"),(114,"r"),(115,"s"),(116,"t"),(117,"u"),
        (118,"v"),(119,"w"),(120,"x"),(121,"y"),(122,"z"),(123,"{"),(124,"|"),(125,"}"),(124,"|"),
        (126," Ìƒ"),(127,"-"),(128,"AÌ†"),(129,"AÌ§"),(130,"Ä†"),(131,"CÌŒ"),(132,"DÌŒ"),(133,"EÌŒ"),(134,"EÌ§"),
        (135,"GÌ†"),(136,"Ä¹"),(137,"LÌ›"),(138,"Å"),(139,"Åƒ"),(140,"NÌŒ"),
        (142,"OÌ‹"),(143,"Å”"),(144,"RÌŒ"),(145,"Åš"),(146,"SÌŒ"),(147,"SÌ§"),(148,"TÌŒ"),(149,"TÌ§"),(150,"UÌ‹"),
        (151,"UÌŠ"),(152,"YÌˆ"),(153,"Å¹"),(154,"ZÌŒ"),(155,"ZÌ‡"),(156,"IJ"),(157,"IÌ‡"),(158,"Ä‘"),(159,"Â§"),
        (160,"aÌ†"),(161,"aÌ§"),(162,"Ä‡"),(163,"cÌŒ"),(164,"dÌ›"),(165,"eÌ†"),(166,"eÌ§"),(167,"gÌ†"),(168,"Äº"),
        (169,"lÌ›"),(170,"Å‚"),(171,"Å„"),(172,"nÌŒ"),
        (174,"oÌ‹"),(175,"Å•"),(176,"rÌŒ"),(177,"Å›"),(178,"sÌŒ"),(179,"sÌ§"),(180,"tÌ›"),(181,"tÌ§"),(182,"uÌ‹"),
        (183,"uÌŠ"),(184,"yÌˆ"),(185,"Åº"),(186,"zÌŒ"),(187,"zÌ‡"),(188,"ij"),(189,"Â¡"),(190,"Â¿"),(191,"Â£"),
        (192,"Ã€"),(193,"Ã"),(194,"Ã‚"),(195,"Ãƒ"),(196,"Ã„"),(197,"Ã…"),(198,"Ã†"),(199,"Ã‡"),(200,"Ãˆ"),
        (201,"Ã‰"),(202,"ÃŠ"),(203,"Ã‹"),(204,"ÃŒ"),(205,"Ã"),(206,"Ã"),(207,"Ã"),(208,"Ã"),(209,"Ã‘"),
        (210,"Ã’"),(211,"Ã“"),(212,"Ã”"),(213,"Ã•"),(214,"Ã–"),(215,"Å’"),(216,"Ã˜"),(217,"Ã™"),(218,"Ãš"),
        (219,"Ã›"),(220,"Ãœ"),(221,"Ã"),(222,"Ã"),(223,"SS"),(224,"Ã "),(225,"Ã¡"),(226,"Ã¢"),(227,"Ã£"),
        (228,"Ã¤"),(229,"Ã¥"),(230,"Ã¦"),(231,"Ã§"),(232,"Ã¨"),(233,"Ã©"),(234,"Ãª"),(235,"Ã«"),(236,"Ã¬"),
        (237,"Ã­"),(238,"Ã®"),(239,"Ã¯"),(240,"Ã°"),(241,"Ã±"),(242,"Ã²"),(243,"Ã³"),(244,"Ã´"),(245,"Ãµ"),
        (246,"Ã¶"),(247,"Å“"),(248,"Ã¸"),(249,"Ã¹"),(250,"Ãº"),(251,"Ã»"),(252,"Ã¼"),(253,"Ã½"),(254,"Ã¾"),
        (255,"ÃŸ")
    ]);


    pub static ref SCRIPT : HashMap<char,char> = HashMap::from([
        ('A','ğ“'),('B','ğ“‘'),('C','ğ“’'),('D','ğ““'),('E','ğ“”'),('F','ğ“•'),('G','ğ“–'),('H','ğ“—'),('I','ğ“˜'),
        ('J','ğ“™'),('K','ğ“š'),('L','ğ“›'),('M','ğ“œ'),('N','ğ“'),('O','ğ“'),('P','ğ“Ÿ'),('Q','ğ“ '),('R','ğ“¡'),
        ('S','ğ“¢'),('T','ğ“£'),('U','ğ“¤'),('V','ğ“¥'),('W','ğ“¦'),('X','ğ“§'),('Y','ğ“¨'),('Z','ğ“©')
    ]);
    pub static ref BOLD : HashMap<char,char> = HashMap::from([
        ('Î“','ğšª'),('âˆ†','ğš«'),('Î˜','ğš¯'),('Î›','ğš²'),('Î','ğšµ'),('Î ','ğš·'),('Î£','ğšº'),('Î¥','ğš¼'),('Î¦','ğš½'),
        ('Î¨','ğš¿'),('Î©','ğ›€'),
        ('Î±','ğ›‚'),('Î²','ğ›ƒ'),('Î³','ğ›„'),('Î´','ğ›…'),('Îµ','ğ›†'),('Î¶','ğ›‡'),('Î·','ğ›ˆ'),('Î¸','ğ›‰'),('Î¹','ğ›Š'),
        ('Îº','ğ›‹'),('Î»','ğ›Œ'),('Î¼','ğ›'),('Î½','ğ›'),('Î¾','ğ›'),('Î¿','ğ›'),('Ï€','ğ›‘'),('Ï','ğ›’'),('Ïƒ','ğ›”'),
        ('Ï„','ğ›•'),('Ï…','ğ›–'),('Ï†','ğ›—'),('Ï‡','ğ›˜'),('Ïˆ','ğ›™'),('Ï‰','ğ›š'),

        ('0','ğŸ'),('1','ğŸ'),('2','ğŸ'),('3','ğŸ‘'),('4','ğŸ’'),('5','ğŸ“'),('6','ğŸ”'),('7','ğŸ•'),('8','ğŸ–'),
        ('9','ğŸ—'),
        ('A','ğ€'),('B','ğ'),('C','ğ‚'),('D','ğƒ'),('E','ğ„'),('F','ğ…'),('G','ğ†'),('H','ğ‡'),('I','ğˆ'),
        ('J','ğ‰'),('K','ğŠ'),('L','ğ‹'),('M','ğŒ'),('N','ğ'),('O','ğ'),('P','ğ'),('Q','ğ'),('R','ğ‘'),
        ('S','ğ’'),('T','ğ“'),('U','ğ”'),('V','ğ•'),('W','ğ–'),('X','ğ—'),('Y','ğ˜'),('Z','ğ™'),
        ('a','ğš'),('b','ğ›'),('c','ğœ'),('d','ğ'),('e','ğ'),('f','ğŸ'),('g','ğ '),('h','ğ¡'),('i','ğ¢'),
        ('j','ğ£'),('k','ğ¤'),('l','ğ¥'),('m','ğ¦'),('n','ğ§'),('o','ğ¨'),('p','ğ©'),('q','ğª'),('r','ğ«'),
        ('s','ğ¬'),('t','ğ­'),('u','ğ®'),('v','ğ¯'),('w','ğ°'),('x','ğ±'),('y','ğ²'),('z','ğ³')
    ]);
    pub static ref BOLD_ITALIC : HashMap<char,char> = HashMap::from([
        ('Î“','ğœ'),('âˆ†','ğœŸ'),('Î˜','ğœ£'),('Î›','ğœ¦'),('Î','ğœ©'),('Î ','ğœ«'),('Î£','ğœ®'),('Î¥','ğœ°'),('Î¦','ğœ±'),
        ('Î¨','ğœ³'),('Î©','ğœ´'),
        ('Î±','ğœ¶'),('Î²','ğœ·'),('Î³','ğœ¸'),('Î´','ğœ¹'),('Îµ','ğœº'),('Î¶','ğœ»'),('Î·','ğœ¼'),('Î¸','ğœ½'),('Î¹','ğœ¾'),
        ('Îº','ğœ¿'),('Î»','ğ€'),('Î¼','ğ'),('Î½','ğ‚'),('Î¾','ğƒ'),('Î¿','ğ„'),('Ï€','ğ…'),('Ï','ğ†'),('Ïƒ','ğˆ'),
        ('Ï„','ğ‰'),('Ï…','ğŠ'),('Ï†','ğ‹'),('Ï‡','ğŒ'),('Ïˆ','ğ'),('Ï‰','ğ'),

        ('0','ğŸ'),('1','ğŸ'),('2','ğŸ'),('3','ğŸ‘'),('4','ğŸ’'),('5','ğŸ“'),('6','ğŸ”'),('7','ğŸ•'),('8','ğŸ–'),
        ('9','ğŸ—'),
        ('A','ğ‘¨'),('B','ğ‘©'),('C','ğ‘ª'),('D','ğ‘«'),('E','ğ‘¬'),('F','ğ‘­'),('G','ğ‘®'),('H','ğ‘¯'),('I','ğ‘°'),
        ('J','ğ‘±'),('K','ğ‘²'),('L','ğ‘³'),('M','ğ‘´'),('N','ğ‘µ'),('O','ğ‘¶'),('P','ğ‘·'),('Q','ğ‘¸'),('R','ğ‘¹'),
        ('S','ğ‘º'),('T','ğ‘»'),('U','ğ‘¼'),('V','ğ‘½'),('W','ğ‘¾'),('X','ğ‘¿'),('Y','ğ’€'),('Z','ğ’'),
        ('a','ğ’‚'),('b','ğ’ƒ'),('c','ğ’„'),('d','ğ’…'),('e','ğ’†'),('f','ğ’‡'),('g','ğ’ˆ'),('h','ğ’‰'),('i','ğ’Š'),
        ('j','ğ’‹'),('k','ğ’Œ'),('l','ğ’'),('m','ğ’'),('n','ğ’'),('o','ğ’'),('p','ğ’‘'),('q','ğ’’'),('r','ğ’“'),
        ('s','ğ’”'),('t','ğ’•'),('u','ğ’–'),('v','ğ’—'),('w','ğ’˜'),('x','ğ’™'),('y','ğ’š'),('z','ğ’›')
    ]);
    pub static ref CAPITAL : HashMap<char,char> = HashMap::from([
        ('A','ğ– '),('B','ğ–¡'),('C','ğ–¢'),('D','ğ–£'),('E','ğ–¤'),('F','ğ–¥'),('G','ğ–¦'),('H','ğ–§'),('I','ğ–¨'),
        ('J','ğ–©'),('K','ğ–ª'),('L','ğ–«'),('M','ğ–¬'),('N','ğ–­'),('O','ğ–®'),('P','ğ–¯'),('Q','ğ–°'),('R','ğ–±'),
        ('S','ğ–²'),('T','ğ–³'),('U','ğ–´'),('V','ğ–µ'),('W','ğ–¶'),('X','ğ–·'),('Y','ğ–¸'),('Z','ğ–¹'),
        ('a','á´€'),('b','Ê™'),('c','á´„'),('d','á´…'),('e','á´‡'),('f','êœ°'),('g','É¢'),('h','Êœ'),('i','Éª'),
        ('j','á´Š'),('k','á´‹'),('l','ÊŸ'),('m','á´'),('n','É´'),('o','á´'),('p','á´˜'),('q','Q'),('r','Ê€'),
        ('s','êœ±'),('t','á´›'),('u','á´œ'),('v','á´ '),('w','á´¡'),('x','ğ—‘'),('y','Ê'),('z','á´¢')
    ]);

    // Italic ğ›¢ ğ›£ ğ›¤ ğ›¥ ğ›¦ ğ›§ ğ›¨ ğ›© ğ›ª ğ›« ğ›¬ ğ›­ ğ›® ğ›¯ ğ›° ğ›± ğ›² ğ›´ ğ›µ ğ›¶ ğ›· ğ›¸ ğ›¹ ğ›º ğ›¼ ğ›½ ğ›¾ ğ›¿ ğœ€ ğœ ğœ‚ ğœƒ ğœ„ ğœ… ğœ† ğœ‡ ğœˆ ğœ‰ ğœŠ ğœ‹ ğœŒ ğœ ğœ ğœ ğœ‘ ğœ’ ğœ“ ğœ”
    // Sans-Serif Bold ğ– ğ— ğ˜ ğ™ ğš ğ› ğœ ğ ğ ğŸ ğ  ğ¡ ğ¢ ğ£ ğ¤ ğ¥ ğ¦ ğ¨ ğ© ğª ğ« ğ¬ ğ­ ğ® ğ° ğ± ğ² ğ³ ğ´ ğµ ğ¶ ğ· ğ¸ ğ¹ ğº ğ» ğ¼ ğ½ ğ¾ ğ¿ ğ€ ğ‚ ğƒ ğ„ ğ… ğ† ğ‡ ğˆ
    // Sans-Serif Bold Italic ğ ğ‘ ğ’ ğ“ ğ” ğ• ğ– ğ— ğ˜ ğ™ ğš ğ› ğœ ğ ğ ğŸ ğ  ğ¢ ğ£ ğ¤ ğ¥ ğ¦ ğ§ ğ¨ ğª ğ« ğ¬ ğ­ ğ® ğ¯ ğ° ğ± ğ² ğ³ ğ´ ğµ ğ¶ ğ· ğ¸ ğ¹ ğº ğ¼ ğ½ ğ¾ ğ¿ ğŸ€ ğŸ ğŸ‚
}